<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harta României — Județe Colorate</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  body, html { margin:0; height:100%; }
  #map { width:100%; height:100%; }
  .county-label {
    font-size: 12px;
    font-weight: bold;
    color: #000;
    text-align: center;
    pointer-events: none;
    text-shadow: 0 0 3px #fff;
  }
</style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map('map', {
  maxBounds: [[43.5, 20.2],[48.7,29.7]],
  maxBoundsViscosity: 1.0
});

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

const geojsonURL = 'https://raw.githubusercontent.com/maurSAN/harta-test/main/centre-judete.geojson';

// Abrevieri județe
const abbreviations = {
  "Alba": "AB","Arad":"AR","Argeș":"AG","Bacău":"BC","Bihor":"BH",
  "Bistrița-Năsăud":"BN","Botoșani":"BT","Brașov":"BV","Brăila":"BR",
  "Buzău":"BZ","Caraș-Severin":"CS","Călărași":"CL","Cluj":"CJ",
  "Constanța":"CT","Covasna":"CV","Dâmbovița":"DB","Dolj":"DJ",
  "Galați":"GL","Giurgiu":"GR","Gorj":"GJ","Harghita":"HR","Hunedoara":"HD",
  "Ialomița":"IL","Iași":"IS","Ilfov":"IF","Maramureș":"MM","Mehedinți":"MH",
  "Mureș":"MS","Neamț":"NT","Olt":"OT","Prahova":"PH","Satu Mare":"SM",
  "Sălaj":"SJ","Sibiu":"SB","Suceava":"SV","Teleorman":"TR","Timiș":"TM",
  "Tulcea":"TL","Vaslui":"VS","Vâlcea":"VL","Vrancea":"VN","București":"B"
};

// Culoare fixă pentru fiecare județ
const colors = {
  "AB":"#e6194b","AR":"#3cb44b","AG":"#ffe119","BC":"#4363d8","BH":"#f58231",
  "BN":"#911eb4","BT":"#46f0f0","BV":"#f032e6","BR":"#bcf60c","BZ":"#fabebe",
  "CS":"#008080","CL":"#e6beff","CJ":"#9a6324","CT":"#fffac8","CV":"#800000",
  "DB":"#aaffc3","DJ":"#808000","GL":"#ffd8b1","GR":"#000075","GJ":"#808080",
  "HR":"#ffffff","HD":"#000000","IL":"#ff7f50","IS":"#87ceeb","IF":"#da70d6",
  "MM":"#32cd32","MH":"#ffb6c1","MS":"#7b68ee","NT":"#00ced1","OT":"#ff69b4",
  "PH":"#cd5c5c","SM":"#4b0082","SJ":"#20b2aa","SB":"#b0e0e6","SV":"#ff4500",
  "TR":"#2e8b57","TM":"#da70d6","TL":"#deb887","VS":"#5f9ea0","VL":"#7fff00",
  "VN":"#d2691e","B":"#8b0000"
};

fetch(geojsonURL)
  .then(res => res.json())
  .then(data => {
    L.geoJSON(data, {
      style: (feature) => {
        const name = feature.properties.name || feature.properties.NUME;
        const abbr = abbreviations[name] || "??";
        return {
          color: "#333",
          weight: 2,
          fillColor: colors[abbr] || "#cccccc",
          fillOpacity: 0.6
        };
      },
      onEachFeature: (feature, layer) => {
        const name = feature.properties.name || feature.properties.NUME;
        const abbr = abbreviations[name] || "??";
        layer.bindTooltip(abbr, {
          permanent: true,
          direction: "center",
          className: 'county-label'
        });
      }
    }).addTo(map).getBounds();
    
    // Zoom automat
    const geoLayer = L.geoJSON(data);
    map.fitBounds(geoLayer.getBounds());
  })
  .catch(err => console.error('Eroare la încărcare GeoJSON:', err));
</script>
</body>
</html>
