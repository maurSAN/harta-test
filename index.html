<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harta României — Județe Colorate</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  body, html { margin:0; height:100%; }
  #map { width:100%; height:100%; }
  .county-label {
    font-size: 12px;
    font-weight: bold;
    color: #000;
    text-align: center;
    pointer-events: none;
    text-shadow: 0 0 3px #fff;
  }
</style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // Limite România
  const romaniaBounds = [[43.5, 20.2], [48.7, 29.7]];

  const map = L.map('map', {
    maxBounds: romaniaBounds,
    maxBoundsViscosity: 1.0
  });

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  const geojsonURL = 'https://raw.githubusercontent.com/maurSAN/harta-test/main/centre-judete.geojson';

  // Mapează fiecare județ la abreviere
  const abbreviations = {
    "Alba": "AB","Arad":"AR","Argeș":"AG","Bacău":"BC","Bihor":"BH",
    "Bistrița-Năsăud":"BN","Botoșani":"BT","Brașov":"BV","Brăila":"BR",
    "Buzău":"BZ","Caraș-Severin":"CS","Călărași":"CL","Cluj":"CJ",
    "Constanța":"CT","Covasna":"CV","Dâmbovița":"DB","Dolj":"DJ",
    "Galați":"GL","Giurgiu":"GR","Gorj":"GJ","Harghita":"HR","Hunedoara":"HD",
    "Ialomița":"IL","Iași":"IS","Ilfov":"IF","Maramureș":"MM","Mehedinți":"MH",
    "Mureș":"MS","Neamț":"NT","Olt":"OT","Prahova":"PH","Satu Mare":"SM",
    "Sălaj":"SJ","Sibiu":"SB","Suceava":"SV","Teleorman":"TR","Timiș":"TM",
    "Tulcea":"TL","Vaslui":"VS","Vâlcea":"VL","Vrancea":"VN","București":"B"
  };

  // Funcție culori stabile
  function getColor(index) {
    const colors = [
      "#e6194b","#3cb44b","#ffe119","#4363d8","#f58231",
      "#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe",
      "#008080","#e6beff","#9a6324","#fffac8","#800000",
      "#aaffc3","#808000","#ffd8b1","#000075","#808080",
      "#ffffff","#000000","#ff7f50","#87ceeb","#da70d6",
      "#32cd32","#ffb6c1","#7b68ee","#00ced1","#ff69b4",
      "#cd5c5c","#4b0082","#20b2aa","#b0e0e6","#ff4500",
      "#2e8b57","#da70d6","#deb887","#5f9ea0","#7fff00","#d2691e"
    ];
    return colors[index % colors.length];
  }

  fetch(geojsonURL)
    .then(res => res.json())
    .then(data => {
      const geojsonLayer = L.geoJSON(data, {
        style: (feature) => {
          const index = Object.keys(abbreviations).indexOf(feature.properties.name || feature.properties.NUME);
          return {
            color: "#333",
            weight: 2,
            fillColor: getColor(index),
            fillOpacity: 0.6
          };
        },
        onEachFeature: (feature, layer) => {
          const name = feature.properties.name || feature.properties.NUME;
          const abbr = abbreviations[name] || name;
          layer.bindTooltip(abbr, {
            permanent: true,
            direction: "center",
            className: 'county-label'
          });
        }
      }).addTo(map);

      map.fitBounds(geojsonLayer.getBounds());
    })
    .catch(err => console.error('Eroare la încărcare GeoJSON:', err));

</script>
</body>
</html>
